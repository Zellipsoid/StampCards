(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{204:function(e,t,a){e.exports=a(380)},209:function(e,t,a){},376:function(e,t){},380:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(46),o=a.n(s),i=(a(209),a(36)),c=a(37),l=a(40),u=a(38),d=a(39),m=a(23),h=(a(96),a(57)),v=(a(125),a(391)),g=a(392),p=a(389),b=a(387),w=a(381),E=a(388),f=a(395),_=a(396),y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={visible:!0,loading:!1,username:"",password:"",confirm_password:"",showCreateNewAccount:!1,showLogin:!0,username_exists:!1,invalid_login:!1,validation_errors:!1,birthDay:"",birthMonth:""},a.handleChange=function(e){a.setState({validation_errors:!1}),a.setState(Object(h.a)({},e.target.name,e.target.value))},a.handleDateChange=function(e,t){var n,r=t.name,s=t.value;return a.setState((n={},Object(h.a)(n,r,s),Object(h.a)(n,"validation_errors",!1),n))},a.toggleSignUp=function(){var e;a.setState({validation_errors:!1}),e=!a.state.showCreateNewAccount,a.setState({showCreateNewAccount:!1,showLogin:!1}),e?setTimeout(function(){this.setState({showCreateNewAccount:!this.state.showCreateNewAccount})}.bind(Object(m.a)(Object(m.a)(a))),500):setTimeout(function(){this.setState({showLogin:!this.state.showLogin})}.bind(Object(m.a)(Object(m.a)(a))),500)},a.login=function(){a.props.socket.emit("login",{username:a.state.username,password:a.state.password})},a.create_account=function(){a.state.password!==a.state.confirm_password||a.state.password.length<6||""===a.state.birthDay||""===a.state.birthMonth||a.state.username.length<4?a.setState({validation_errors:!0,username_exists:!1,invalid_login:!1}):(a.setState({validation_errors:!1,username_exists:!1,invalid_login:!1}),a.props.socket.emit("create_account",{username:a.state.username,password:a.state.password,birthday:"".concat(a.state.birthMonth<10?"0":"").concat(a.state.birthMonth.toString(10),"-").concat(a.state.birthDay<10?"0":"").concat(a.state.birthDay.toString(10))}))},a.messages=function(){var e="";return a.state.validation_errors?(a.state.invalid_login?e="Your username or password is not recognized":a.state.password!==a.state.confirm_password?e="Passwords do not match":a.state.password.length<6?e="Password must have at least 6 characters":""===a.state.birthDay||""===a.state.birthMonth?e="Please enter a valid birthday":a.state.username.length<4?e="Username must have at least 4 characters":a.state.username_exists&&(e="This username is already taken"),r.a.createElement("div",{className:"niceMargins"},r.a.createElement("div",{className:"row"},r.a.createElement(v.a,{warning:!0},r.a.createElement(v.a.Header,null,e),r.a.createElement("p",null,"Please try again."))))):r.a.createElement("div",null)},a.timePicker=function(){var e=new Array(31).fill(void 0).map(function(e,t){var a=t+1;return{key:a,text:a.toString(10),value:a}});return r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(g.a.Item,{header:!0},"Birthday"),r.a.createElement(g.a.Menu,{position:"right"},r.a.createElement(p.a,{placeholder:"Month",options:[{key:"Jan",text:"January",value:1},{key:"Feb",text:"February",value:2},{key:"Mar",text:"March",value:3},{key:"Apr",text:"April",value:4},{key:"May",text:"May",value:5},{key:"Jun",text:"June",value:6},{key:"Jul",text:"July",value:7},{key:"Aug",text:"August",value:8},{key:"Sep",text:"September",value:9},{key:"Oct",text:"October",value:10},{key:"Nov",text:"November",value:11},{key:"Dec",text:"December",value:12}],name:"birthMonth",compact:!0,onChange:a.handleDateChange})),r.a.createElement(g.a.Menu,{position:"right"},r.a.createElement(p.a,{placeholder:"Day",options:e,name:"birthDay",compact:!0,onChange:a.handleDateChange}))))},a.create=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"niceMargins"},r.a.createElement("div",{className:"row"},r.a.createElement(b.a,{fluid:!0,name:"confirm_password",onChange:a.handleChange,placeholder:"Confirm Password",type:"password"}))),r.a.createElement("div",{className:"niceMargins"},r.a.createElement("div",{className:"row"},a.timePicker())),r.a.createElement("div",{className:"niceMargins"},r.a.createElement("div",{className:"row"},r.a.createElement(w.a,{fluid:!0,onClick:a.create_account},"Create Account"))),r.a.createElement("div",{className:"niceMargins"},r.a.createElement("div",{className:"row"},r.a.createElement(w.a,{fluid:!0,onClick:a.toggleSignUp},"Back to login"))))},a.normal=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"niceMargins"},r.a.createElement("div",{className:"row"},r.a.createElement(w.a,{fluid:!0,onClick:a.login},"Login"))),r.a.createElement("div",{className:"niceMargins"},r.a.createElement("div",{className:"row"},r.a.createElement(w.a,{fluid:!0,onClick:a.toggleSignUp},"Sign up"))))},a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),e.socket.on("username_taken",function(){console.log("username taken!"),a.setState({username_exists:!0,validation_errors:!0})}),e.socket.on("authentication_error",function(){console.log("invalid login!"),a.setState({invalid_login:!0,validation_errors:!0})}),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.showCreateNewAccount,a=e.showLogin,n=e.validation_errors;return r.a.createElement(E.a,null,r.a.createElement("div",{className:"niceMargins"},r.a.createElement(f.a.Row,null,r.a.createElement(b.a,{fluid:!0,type:"text",name:"username",onChange:this.handleChange,placeholder:"Username"}))),r.a.createElement("div",{className:"niceMargins"},r.a.createElement(f.a.Row,null,r.a.createElement(b.a,{fluid:!0,name:"password",onChange:this.handleChange,placeholder:"Password",type:"password"}))),r.a.createElement(_.a,{animation:"fade right",duration:500,visible:a},this.normal()),r.a.createElement(_.a,{animation:"fade left",duration:500,visible:t},this.create()),r.a.createElement(_.a,{animation:"fade",duration:500,visible:n},this.messages()))}}]),t}(r.a.Component),k=a(390),O=a(393),j=a(194),C=a.n(j),S=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={result:"no result",customer_info:{}},a.handleScan=function(e){e&&(alert(e),a.props.socket.emit("retrieve_customer_data",{username_to_retrieve:e,username_requesting:a.props.user_data.username}))},a.handleError=function(e){console.error(e)},e.socket.on("customer_info",function(e){a.setState({customer_info:e}),console.log("got customer info!")}),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(C.a,{delay:300,onError:this.handleError,onScan:this.handleScan,style:{width:"100%"}}),r.a.createElement(k.a,{fluid:!0,header:"Aim this at a customer's QR code"}))}}]),t}(n.Component),N=a(345),M=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,null===this.props.user_data.rank?r.a.createElement(x,{user_data:this.props.user_data}):r.a.createElement("div",null,r.a.createElement(S,{socket:this.props.socket,user_data:this.props.user_data})))}}]),t}(n.Component);function x(e){return r.a.createElement("div",null,r.a.createElement("div",{style:{width:"85%",margin:"0 auto"}},r.a.createElement(N,{value:e.user_data.username,style:{width:"100%",height:"auto"}})),r.a.createElement(k.a,{fluid:!0,header:"Have a cashier scan this to earn or redeem points"}),r.a.createElement(O.a,{color:"red",size:"huge",style:{width:"100%"}},r.a.createElement(O.a.Value,null,e.user_data.stamps),r.a.createElement(O.a.Label,null,"Stamps Earned")))}var A=a(196),D=a.n(A)()("https://zellipsoid.ngrok.io"),J=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(l.a)(this,Object(u.a)(t).call(this))).state={authenticated:!1,show_dashboard:!1,user_data:{}},e.open_dashboard=function(){e.setState({authenticated:!0}),setTimeout(function(){this.setState({show_dashboard:!0})}.bind(Object(m.a)(Object(m.a)(e))),500)},D.on("authentication_successful",function(t){console.log("User received:"),console.log(t),e.state.user_data=t,e.open_dashboard()}),e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(_.a,{animation:"fade",duration:500,visible:!this.state.authenticated},r.a.createElement("div",{className:"center"},r.a.createElement(y,{socket:D}))),r.a.createElement(_.a,{animation:"fade",duration:500,visible:this.state.show_dashboard},r.a.createElement("div",{className:"center"},r.a.createElement(M,{socket:D,user_data:this.state.user_data}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},96:function(e,t,a){}},[[204,1,2]]]);
//# sourceMappingURL=main.e9f59408.chunk.js.map